# Game
SOURCES=${wildcard *.cpp}
OBJECTS=$(SOURCES:.cpp=$(OBJ_EXTENSION))

# Rules
.cpp$(OBJ_EXTENSION):
	$(CC) $(GEN_OBJECT_FLAG) $< $(OUTPUT_FLAG) $@ $(CFLAGS) $(INCLUDES)

# Build the game
all: $(COMPONENTS) $(GAME)

$(COMPONENTS):
	$(MAKE) -C $@ -f Makefile.$(PLATFORM)

$(GAME): $(COMPONENTS) $(OBJECTS)
	$(CC) $(OUTPUT_FLAG) $@ $(OBJECTS) $(CFLAGS) $(INCLUDES) $(LDFLAGS) $(LIBS) $(EXTRA_LIBS)

.PHONY: all $(COMPONENTS)
